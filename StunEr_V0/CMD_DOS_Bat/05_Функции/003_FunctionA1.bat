:::::::::::::::::::::::::::::::::
@echo off
cd %~dp0
start notepad++ %0 
:::::::::::::::::::::::::::::::::
	if "%1"=="" (call :Main)
	if %1 EQU ":Main" (call :Main)
	::%2 - подхватываемый из вне входной параметр
	if %1 EQU ":Test" (call :Test %2)
	::%2 - подхватываемый из вне возвращаемый в наружу параметр
	if %1 EQU ":Pi" (call :Pi %2)
exit /b
:Main
	echo "<<<BAT LIB>>>"
	echo "Example of function library. By default"
	echo ################################################################
	::Самозапуск содержимого библиотеки
	echo :Test
	::Внутренние функции запускаются как батник
	::с параметрами, вот два способа:
	call "003_FunctionA1.bat" ":Test" "HelloWord"
	call "003_FunctionA1.bat" ":Pi" rez
	echo :Pi=%rez%
	echo ################################################################
	TIMEOUT /T 10
exit /b
rem Пример того как оформить функцию, что бы при вызове из вне пакетного файла оно запускалось
rem Шаг первый: закомментировать весь тестовый код, чтобы он не мешал
rem Шаг второй: убедиться что точка входа (то биш начало скрипта)
rem экранирована командой exit /b, нам случайные закрытия скрипта не нужны
rem Шаг три: вкорячить переброс вызова функции по переданному первому пакетному параметру
rem	Типо так: if %1 EQU ":Test" (call :Test)
rem
rem Этот тест показывает, что %1 является локальным как для пакетного файла, так и для тела функции
rem то есть если не создаются входные параметры, то они создаются как пустые, все 9 штук(%1,%2...%9) 
:Test
	echo %1
exit /b
:Pi
	set %1="3,14"
exit /b